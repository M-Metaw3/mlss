import{L as Q,U as W,u as Y,v as Z,r as n,f as ee,c,h as v,j as l,w as h,T as ae,O as te,a as t,F as j,n as p,i as g,t as b,p as E,q as I,b as x,P as le,x as oe,N as D,g as u,l as re,o as r}from"./index-PF4Eq7D6.js";import{c as O,a as s}from"./index.esm-Bil5A8ED.js";const ne={class:"py-3"},se={key:0,class:"flex items-center justify-center rounded-[10px] bg-white py-20 dark:bg-transparent"},ie={class:"mb-3.5 flex flex-col items-center gap-5 text-light-text dark:text-dark-text lg:flex-row lg:gap-2 lg:px-5 lg:font-medium"},de={class:"mb-3 grid grid-cols-1 overflow-hidden rounded-xl border-2 border-white bg-light-mainBg dark:border-transparent dark:bg-black lg:grid-cols-3"},ce=["title"],ue=["title"],me=["title"],pe={class:"rounded-xl border-2 border-white bg-light-mainBg p-3 dark:border-transparent dark:bg-black lg:p-5"},be={class:"grid grid-cols-12 gap-3 xl:gap-5"},ge={class:"space-y-5"},fe={class:"flex flex-col gap-2"},ve={class:"flex flex-col gap-2"},he={key:3,class:"mt-5 flex items-center gap-5"},xe=["disabled"],ye={class:"flex flex-grow items-center gap-3 lg:gap-5"},ke={__name:"company",setup(Ie){W({validateOnBlur:!0,validateOnChange:!0,validateOnModelUpdate:!0,validateOnInput:!0});const d=Y(),R=le(),A=oe(),C=Z(),o=n(1),P=n({}),M=O().shape({name:s().notRequired(),email:s().notRequired(),phone:s().notRequired(),role:s().notRequired(),faxNumber:s().notRequired(),taxIdNumber:s().notRequired(),commercialRegistrationNumber:s().notRequired(),website:s().notRequired(),address:s().notRequired()}),F=n(null),X=n(null),y=n({}),z=O().shape({taxId:s().notRequired(),commercialRegistration:s().notRequired()}),L=n({columns:[{label:"#",field:"ID"},{label:d.t("LABELS.name"),field:"name"},{label:d.t("LABELS.phone"),field:"phone"},{label:d.t("LABELS.address"),field:"address"},{label:d.t("LABELS.mainBranch"),field:"is_master"}],rows:[]}),S=n(!1),T=n({});async function H(){S.value=!0,await D.get("get-company-by-id",{params:{company_id:R.params.id}}).then(e=>{const a=e.data.data;T.value=a,P.value={email:a.email,name:a.name,phone:a.phone,website:a.website,faxNumber:a.fax_number,taxIdNumber:a.tax_id,commercialRegistrationNumber:a.commercial_registration,address:a.address},L.value.rows=a.branches.map((N,_)=>({...N,ID:_+1})),a.user.company_media&&(F.value=a.user.company_media.front_tax_file,X.value=a.user.company_media.commercial_registration_file,y.value={taxId:a.user.company_media.front_tax_file,commercialRegistration:a.user.company_media.commercial_registration_file})}).catch(e=>{console.error(e),A.push("/companies")}).finally(()=>S.value=!1)}const k=n(!1),$=n(""),f=n(!1);async function G(){f.value=!0,await D.patch(`approve-company?company_id=${R.params.id}&status=${$.value==="approve"?"active":"deactivated"}`).then(()=>{C.success(d.t("TEXTS.companyStatusChangedSuccessfully")),A.push("/companies")}).catch(e=>{console.error(e),C.error(e.response.data.Error[0])}).finally(()=>f.value=!1)}return ee(()=>{H()}),(e,a)=>{const N=u("Modal"),_=u("Loader"),J=u("RouterLink"),w=u("SvgIcon"),m=u("ValidInput"),q=u("VeeForm"),U=u("Image"),K=u("Table"),V=u("Button"),B=re("tooltip");return r(),c(j,null,[(r(),v(te,{to:"body"},[l(ae,{name:"fade"},{default:h(()=>[k.value?(r(),v(N,{key:0,title:e.$t("TITLES.changeStatus"),text:e.$t("TEXTS.confirmChangeStatus"),btnText:e.$t("BUTTONS.change"),loading:f.value,onClose:a[0]||(a[0]=i=>k.value=!1),onHandleClick:G},null,8,["title","text","btnText","loading"])):x("",!0)]),_:1})])),t("div",ne,[S.value?(r(),c("div",se,[l(_)])):(r(),c(j,{key:1},[t("div",ie,[l(J,{to:"/companies"},{default:h(()=>[I(b(e.$t("NAV.companies")),1)]),_:1}),t("i",{class:p(["fa-solid hidden lg:inline",g(d).locale.value==="ar"?"fa-angle-left":"fa-angle-right"])},null,2),a[8]||(a[8]=t("i",{class:"fa-solid fa-angle-down inline lg:hidden"},null,-1)),t("span",null,b(e.$t("TITLES.companyDetails")),1),t("i",{class:p(["fa-solid hidden lg:inline",g(d).locale.value==="ar"?"fa-angle-left":"fa-angle-right"])},null,2),a[9]||(a[9]=t("i",{class:"fa-solid fa-angle-down inline lg:hidden"},null,-1)),t("span",null,b(T.value.name),1)]),t("div",de,[t("button",{type:"button",class:p(["flex h-[60px] items-center justify-start gap-2 border-e-2 border-white px-3 duration-300 hover:text-primary dark:border-black dark:hover:text-primary lg:h-[70px] lg:justify-center lg:border-t-2 lg:px-5 lg:font-medium",o.value===1?"border-t-primary text-primary dark:border-t-dark-primary dark:text-dark-primary":"border-t-transparent text-light-text dark:text-dark-text"]),onClick:a[1]||(a[1]=i=>o.value=1)},[l(w,{icon:"check"}),E((r(),c("span",{class:"max-w-[80%] truncate",title:e.$t("TITLES.corporateInformation")},[I(b(e.$t("TITLES.corporateInformation")),1)],8,ce)),[[B]])],2),t("button",{type:"button",class:p(["flex h-[60px] items-center justify-start gap-2 border-e-2 border-white px-3 duration-300 hover:text-primary dark:border-black lg:h-[70px] lg:justify-center lg:border-t-2 lg:px-5 lg:font-medium",o.value===2?"border-t-primary text-primary dark:border-t-dark-primary dark:text-dark-primary":"border-t-transparent text-light-text dark:text-dark-text"]),onClick:a[2]||(a[2]=i=>o.value=2)},[l(w,{icon:"check"}),E((r(),c("span",{class:"max-w-[80%] truncate",title:e.$t("TITLES.documents")},[I(b(e.$t("TITLES.documents")),1)],8,ue)),[[B]])],2),t("button",{type:"button",class:p(["flex h-[60px] items-center justify-start gap-2 border-e-2 border-white px-3 duration-300 hover:text-primary dark:border-black lg:h-[70px] lg:justify-center lg:border-t-2 lg:px-5 lg:font-medium",o.value===3?"border-t-primary text-primary dark:border-t-dark-primary dark:text-dark-primary":"border-t-transparent text-light-text dark:text-dark-text"]),onClick:a[3]||(a[3]=i=>o.value=3)},[l(w,{icon:"check"}),E((r(),c("span",{class:"max-w-[80%] truncate",title:e.$t("TITLES.branches")},[I(b(e.$t("TITLES.branches")),1)],8,me)),[[B]])],2)]),t("div",pe,[o.value===1?(r(),v(q,{key:0,as:"div","initial-values":P.value,"validation-schema":g(M)},{default:h(()=>[t("form",be,[l(m,{id:"corporateName",class:"col-span-12 xl:col-span-6",name:"name",label:e.$t("LABELS.corporateName"),placeholder:e.$t("INPUTS.corporateNamePlaceholder"),disabled:""},null,8,["label","placeholder"]),l(m,{id:"email",class:"col-span-12 xl:col-span-6",name:"email",disabled:"",label:e.$t("LABELS.email"),placeholder:e.$t("INPUTS.emailPlaceholder")},null,8,["label","placeholder"]),l(m,{id:"phone",class:"col-span-12 xl:col-span-6",name:"phone",isNumber:"",label:e.$t("LABELS.phone"),placeholder:"00 000 000 000",disabled:""},null,8,["label"]),l(m,{id:"faxNumber",class:"col-span-12 xl:col-span-6",name:"faxNumber",isNumber:"",label:e.$t("LABELS.faxNumber"),placeholder:e.$t("INPUTS.faxNumberPlaceholder"),disabled:""},null,8,["label","placeholder"]),l(m,{id:"taxIdNumber",class:"col-span-12 xl:col-span-6",name:"taxIdNumber",isNumber:"",label:e.$t("LABELS.taxIdNumber"),placeholder:e.$t("INPUTS.taxIdNumberPlaceholder"),disabled:""},null,8,["label","placeholder"]),l(m,{id:"website",class:"col-span-12 xl:col-span-6",name:"website",label:e.$t("LABELS.website"),placeholder:e.$t("INPUTS.websitePlaceholder"),disabled:""},null,8,["label","placeholder"]),l(m,{id:"address",class:"col-span-12 xl:col-span-6",name:"address",label:e.$t("LABELS.address"),placeholder:e.$t("INPUTS.addressPlaceholder"),disabled:""},null,8,["label","placeholder"]),l(m,{id:"commercialRegistrationNumber",class:"col-span-12 xl:col-span-6",name:"commercialRegistrationNumber",isNumber:"",label:e.$t("LABELS.commercialRegistrationNumber"),placeholder:e.$t("INPUTS.numberPlaceholder"),disabled:""},null,8,["label","placeholder"])])]),_:1},8,["initial-values","validation-schema"])):o.value===2?(r(),v(q,{key:1,"initial-values":y.value,"validation-schema":g(z),as:"div"},{default:h(()=>[t("form",ge,[t("div",fe,[l(U,{id:"taxIdImage",label:e.$t("LABELS.taxId"),defaultImage:y.value.taxId||"",name:"taxId",disabled:""},null,8,["label","defaultImage"])]),t("div",ve,[l(U,{id:"commercialRegistration",label:e.$t("LABELS.commercialRegistration"),defaultImage:y.value.commercialRegistration||"",name:"commercialRegistration",disabled:""},null,8,["label","defaultImage"])])])]),_:1},8,["initial-values","validation-schema"])):o.value===3?(r(),v(K,{key:2,"is-slot-mode":!0,columns:L.value.columns,rows:L.value.rows,pagination:!1,"is-hide-paging":!0,class:"font-medium"},{is_master:h(i=>[t("span",{class:p(i.value.is_master?"text-green":"text-primary")},b(i.value.is_master?e.$t("LABELS.mainBranch"):e.$t("LABELS.unMainBranch")),3)]),_:1},8,["columns","rows"])):x("",!0),T.value.status==="new"?(r(),c("div",he,[o.value!==1?(r(),c("button",{key:0,type:"button",class:"arrow-btn",disabled:o.value===1,onClick:a[4]||(a[4]=i=>o.value--)},[t("i",{class:p(["fa-solid",g(d).locale.value==="ar"?"fa-angle-right":"fa-angle-left"])},null,2)],8,xe)):x("",!0),t("div",ye,[l(V,{type:"button",text:e.$t("BUTTONS.decline"),class:"decline-btn",disabled:f.value,onBtnClick:a[5]||(a[5]=i=>{$.value="decline",k.value=!0})},null,8,["text","disabled"]),l(V,{type:"button",text:e.$t("BUTTONS.approve"),class:"approve-btn",disabled:f.value,onBtnClick:a[6]||(a[6]=i=>{$.value="approve",k.value=!0})},null,8,["text","disabled"])]),o.value!==3?(r(),c("button",{key:1,type:"button",class:"arrow-btn",onClick:a[7]||(a[7]=i=>o.value++)},[t("i",{class:p(["fa-solid",g(d).locale.value==="ar"?"fa-angle-left":"fa-angle-right"])},null,2)])):x("",!0)])):x("",!0)])],64))])],64)}}},Te=Q(ke,[["__scopeId","data-v-eb7656ad"]]);export{Te as default};
